/**
 * ch.maenulabs.validation v0.1.0
 * built on 29.06.2014
 * Copyright 2014 Manuel Leuenberger
 * licenced under MIT, see LICENSE.txt
 */
(function(){window.ch||(window.ch={}),window.ch.maenulabs||(window.ch.maenulabs={}),window.ch.maenulabs.validation||(window.ch.maenulabs.validation={})})(),function(){ch.maenulabs.validation.Validation=new ch.maenulabs.type.Type(Object,{initialize:function(i){i=i||[],this.checks=[];for(var n=0;i.length>n;n+=1)this.add(i[n])},add:function(i){if(this.includes(i))throw Error("already included");this.checks.push(i)},remove:function(i){if(!this.includes(i))throw Error("not included");this.checks.splice(this.checks.indexOf(i),1)},includes:function(i){return this.checks.indexOf(i)>-1},hasErrors:function(i){for(var n=0;this.checks.length>n;n+=1){var e=this.checks[n];if(e.hasErrors(i))return!0}return!1},getErrors:function(i){for(var n={},e=0;this.checks.length>e;e+=1){var t=this.checks[e];if(t.hasErrors(i)){var a=t.getErrors(i);for(var s in a)a.hasOwnProperty(s)&&(n[s]=n[s]||[],n[s].push(a[s]))}}return n}})}(),function(){ch.maenulabs.validation.PropertiesCheck=new ch.maenulabs.type.Type(Object,{initialize:function(i,n,e){this.properties=i,this.checker=n,this.messager=e},hasErrors:function(i){return!this.checker.apply(this,this.getValues(i))},getErrors:function(i){for(var n=this.messager.apply(this,this.getValues(i)),e={},t=0;this.properties.length>t;t+=1)e[this.properties[t]]=n;return e},getValues:function(i){for(var n=[],e=0;this.properties.length>e;e+=1)null==i?n.push(void 0):n.push(i[this.properties[e]]);return n}})}(),function(){ch.maenulabs.validation.ObjectCheck=new ch.maenulabs.type.Type(Object,{initialize:function(i,n,e){null==e&&(e=!0),this.property=i,this.validation=n,this.required=e},hasErrors:function(i){return this.required||null!=i&&null!=i[this.property]?null==i?this.validation.hasErrors(void 0):this.validation.hasErrors(i[this.property]):!1},getErrors:function(i){var n={};return this.required||null!=i&&null!=i[this.property]?(n[this.property]=null==i?this.validation.getErrors(void 0):this.validation.getErrors(i[this.property]),n):(n[this.property]={},n)}})}(),function(){ch.maenulabs.validation.ExistenceCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(i,n){this.base("initialize")([i],function(i){return null!=i},n||function(){return i18n["ch/maenulabs/validation/ExistenceCheck"].message()})}})}(),function(){ch.maenulabs.validation.AtLeastCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(i,n,e){this.base("initialize")([i],function(i){return i>=n},e||function(){return i18n["ch/maenulabs/validation/AtLeastCheck"].message({amount:n})})}})}(),function(){ch.maenulabs.validation.AtMostCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(i,n,e){this.base("initialize")([i],function(i){return n>=i},e||function(){return i18n["ch/maenulabs/validation/AtMostCheck"].message({amount:n})})}})}(),function(){ch.maenulabs.validation.GreaterThanCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(i,n,e){this.base("initialize")([i],function(i){return i>n},e||function(){return i18n["ch/maenulabs/validation/GreaterThanCheck"].message({amount:n})})}})}(),function(){ch.maenulabs.validation.LessThanCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(i,n,e){this.base("initialize")([i],function(i){return n>i},e||function(){return i18n["ch/maenulabs/validation/LessThanCheck"].message({amount:n})})}})}(),function(){var i=ch.maenulabs.validation.Validation,n=ch.maenulabs.validation.AtLeastCheck,e=ch.maenulabs.validation.AtMostCheck;ch.maenulabs.validation.StringLengthRangeCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.ObjectCheck,{initialize:function(t,a,s,r){this.base("initialize")(t,new i([new n("length",a,function(){return i18n["ch/maenulabs/validation/StringLengthRangeCheck"].minimum({amount:a})}),new e("length",s,function(){return i18n["ch/maenulabs/validation/StringLengthRangeCheck"].maximum({amount:s})})]),r)}})}();