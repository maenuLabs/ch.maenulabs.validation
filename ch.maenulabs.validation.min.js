/**
 * ch.maenulabs.validation v0.1.2
 * built on 29.10.2014
 * Copyright 2014 Manuel Leuenberger
 * licenced under MIT, see LICENSE.txt
 */
(function(){window.ch||(window.ch={}),window.ch.maenulabs||(window.ch.maenulabs={}),window.ch.maenulabs.validation||(window.ch.maenulabs.validation={})})(),function(){ch.maenulabs.validation.Validation=new ch.maenulabs.type.Type(Object,{initialize:function(n){n=n||[],this.checks=[];for(var e=0;n.length>e;e+=1)this.add(n[e])},add:function(n){if(this.includes(n))throw Error("already included");this.checks.push(n)},remove:function(n){if(!this.includes(n))throw Error("not included");this.checks.splice(this.checks.indexOf(n),1)},includes:function(n){return this.checks.indexOf(n)>-1},hasErrors:function(n){for(var e=0;this.checks.length>e;e+=1){var i=this.checks[e];if(i.hasErrors(n))return!0}return!1},getErrors:function(n){for(var e={},i=0;this.checks.length>i;i+=1){var t=this.checks[i];if(t.hasErrors(n)){var a=t.getErrors(n);for(var s in a)a.hasOwnProperty(s)&&(e[s]=e[s]||[],e[s].push(a[s]))}}return e}})}(),function(){ch.maenulabs.validation.PropertiesCheck=new ch.maenulabs.type.Type(Object,{initialize:function(n,e,i){this.properties=n,this.checker=e,this.messager=i},hasErrors:function(n){return!this.checker.apply(this,this.getValues(n))},getErrors:function(n){for(var e=this.messager.apply(this,this.getValues(n)),i={},t=0;this.properties.length>t;t+=1)i[this.properties[t]]=e;return i},getValues:function(n){for(var e=[],i=0;this.properties.length>i;i+=1)null==n?e.push(void 0):e.push(n[this.properties[i]]);return e}})}(),function(){ch.maenulabs.validation.ObjectCheck=new ch.maenulabs.type.Type(Object,{initialize:function(n,e,i){null==i&&(i=!0),this.property=n,this.validation=e,this.required=i},hasErrors:function(n){return this.required||null!=n&&null!=n[this.property]?null==n?this.validation.hasErrors(void 0):this.validation.hasErrors(n[this.property]):!1},getErrors:function(n){var e={};return this.required||null!=n&&null!=n[this.property]?(e[this.property]=null==n?this.validation.getErrors(void 0):this.validation.getErrors(n[this.property]),e):(e[this.property]={},e)}})}(),function(){ch.maenulabs.validation.ExistenceCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(n,e){this.base("initialize")([n],function(n){return null!=n},e||function(){return i18n["ch/maenulabs/validation/ExistenceCheck"].message()})}})}(),function(){ch.maenulabs.validation.AtLeastCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(n,e,i){this.base("initialize")([n],function(n){return n>=e},i||function(){return i18n["ch/maenulabs/validation/AtLeastCheck"].message({amount:e})})}})}(),function(){ch.maenulabs.validation.AtMostCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(n,e,i){this.base("initialize")([n],function(n){return e>=n},i||function(){return i18n["ch/maenulabs/validation/AtMostCheck"].message({amount:e})})}})}(),function(){ch.maenulabs.validation.GreaterThanCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(n,e,i){this.base("initialize")([n],function(n){return n>e},i||function(){return i18n["ch/maenulabs/validation/GreaterThanCheck"].message({amount:e})})}})}(),function(){ch.maenulabs.validation.LessThanCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.PropertiesCheck,{initialize:function(n,e,i){this.base("initialize")([n],function(n){return e>n},i||function(){return i18n["ch/maenulabs/validation/LessThanCheck"].message({amount:e})})}})}(),function(){var n=ch.maenulabs.validation.Validation,e=ch.maenulabs.validation.AtLeastCheck,i=ch.maenulabs.validation.AtMostCheck;ch.maenulabs.validation.StringLengthRangeCheck=new ch.maenulabs.type.Type(ch.maenulabs.validation.ObjectCheck,{initialize:function(t,a,s,r){this.base("initialize")(t,new n([new e("length",a,function(){return i18n["ch/maenulabs/validation/StringLengthRangeCheck"].minimum({amount:a})}),new i("length",s,function(){return i18n["ch/maenulabs/validation/StringLengthRangeCheck"].maximum({amount:s})})]),r)}})}();